<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sindhu Tap Game</title>

<style>
    body {
        margin:0;
        padding:0;
        background:#0e0e0e;
        color:white;
        font-family:sans-serif;
        text-align:center;
    }
    #title {
        font-size:26px;
        margin-top:20px;
        font-weight:700;
    }
    #scrollMsg {
        background:#111;
        padding:8px;
        font-size:14px;
        color:#ffde59;
        white-space: nowrap;
        overflow:hidden;
        box-shadow:0 0 10px rgba(255,255,255,0.1);
    }
    #coin {
        width: 200px;
        margin-top:40px;
        transition:0.1s;
    }
    .tapEffect {
        animation: tap 0.1s ease;
    }
    @keyframes tap {
        0% { transform: scale(1); }
        50% { transform: scale(0.9); }
        100% { transform: scale(1); }
    }
    #counter {
        font-size:20px;
        margin-top:20px;
    }
</style>
</head>

<body>

<div id="scrollMsg">Loading announcements...</div>

<div id="title">ðŸ”¥ Sindhu Tap Game</div>

<img id="coin" src="logo.png">

<div id="counter">
    Taps Today: <span id="taps">0</span><br>
    Energy: <span id="energy">50</span>
</div>

<audio id="tapSound" src="tap.mp3"></audio>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let taps = 0;
let energy = 50;

// Load scrolling admin message
fetch("/admin/message")
  .then(res => res.text())
  .then(txt => {
    document.getElementById("scrollMsg").innerHTML = txt || "Welcome to Sindhu Airdrop!";
});

// Tap event
const coin = document.getElementById("coin");
coin.addEventListener("click", () => {
    if (energy <= 0) return;

    taps++;
    energy--;

    document.getElementById("taps").innerText = taps;
    document.getElementById("energy").innerText = energy;

    coin.classList.add("tapEffect");
    setTimeout(() => coin.classList.remove("tapEffect"), 120);

    document.getElementById("tapSound").play();

    // send taps to telegram
    tg.sendData(JSON.stringify({ taps }));
});
</script>

</body>
</html>
